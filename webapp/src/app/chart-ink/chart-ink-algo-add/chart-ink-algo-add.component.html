<meta name="viewport" content="width=device-width, initial-scale=1.0">
<button class="close" mat-button (click)="close()">X</button>
<!--<app-alert></app-alert>-->
<h1 matDialogTitle *ngIf="!update">Add Action</h1>
<h1 matDialogTitle *ngIf="update">Update Action</h1>
<hr>
<div matDialogContent>
    <form [formGroup]="alertForm">
        <div class="form-group">
            <mat-form-field class="example-full-width">
                <mat-label for="name" class="text-dark">Alert name<span
                        class="required">*</span>
                </mat-label>
            <input matInput #alertName type="text" formControlName="an" id="name"
                   placeholder=""
                   [ngClass]="{ 'is-invalid': alertForm.get('an').dirty && alertForm.get('an').invalid }"/>
            <app-form-error-container class="invalid-feedback"
                                      [control]="alertForm.get('an')">
                <app-form-error type="required">
                    Alert name is required
                </app-form-error>
                <app-form-error type="maxlength">
                    Alert name length can not be more than 32
                </app-form-error>
            </app-form-error-container>
        </mat-form-field>
        </div>
        <div class="form-group">
            <mat-form-field class="example-full-width">
                <mat-label for="comment" class="text-dark">Description</mat-label>
                <textarea matInput rows="2" id="comment" formControlName="des"
                        [ngClass]="{ 'is-invalid': alertForm.get('des').dirty && alertForm.get('des').invalid }"></textarea>
                <app-form-error-container class="invalid-feedback"
                                        [control]="alertForm.get('des')">
                    <app-form-error type="maxlength">
                        Description length can not be more than 200
                    </app-form-error>
                </app-form-error-container>
            </mat-form-field>
        </div>
        <div class="form-group">
            <mat-form-field class="example-full-width">
                <mat-label for="type" class="text-dark">Transaction type<span
                        class="required">*</span></mat-label>
                <mat-select formControlName="tt" id="type"
                        [ngClass]="{ 'is-invalid': alertForm.get('tt').dirty && alertForm.get('tt').invalid }">
                    <!-- <mat-option value="" disabled selected>Select</mat-option> -->
                    <mat-option value="BUY">Buy</mat-option>
                    <mat-option value="SELL">Sell</mat-option>
                </mat-select>
                <app-form-error-container class="invalid-feedback" [control]="alertForm.get('tt')">
                    <app-form-error type="required">
                        Transaction type is required.
                    </app-form-error>
                </app-form-error-container>
            </mat-form-field>
        </div>
        <div class="row">
            <div class="form-group align-elements" style="padding-right: 1rem;padding-left: 1rem">
                <mat-form-field class="example-full-width">
                    <mat-label for="profit" class="text-dark">Profit(%)<span
                            class="required">*</span></mat-label>
                    <input matInput type="text" formControlName="pp" id="profit"
                        placeholder="Enter profit %"
                        [ngClass]="{ 'is-invalid': alertForm.get('pp').dirty && alertForm.get('pp').invalid }"/>
                    <app-form-error-container class="invalid-feedback"
                                            [control]="alertForm.get('pp')">
                        <app-form-error type="required">
                            Profit(%) is required
                        </app-form-error>
                        <app-form-error type="min">
                            Profit% can't be less than or equal to 0
                        </app-form-error>
                        <app-form-error type="max">
                            Profit% can't be more than 100
                        </app-form-error>
                        <app-form-error type="pattern">
                            Profit% data is invalid
                        </app-form-error>
                    </app-form-error-container>
                </mat-form-field>
            </div>
            <div class="form-group" style="padding-right: 1rem;padding-left: 1rem">
                <mat-form-field class="example-full-width">
                    <mat-label for="loss" class="text-dark">Loss(%)<span
                            class="required">*</span></mat-label>
                    <input matInput type="text" formControlName="lp" id="loss"
                        placeholder="Enter loss%"
                        [ngClass]="{ 'is-invalid': alertForm.get('lp').dirty && alertForm.get('lp').invalid }"/>
                    <app-form-error-container class="invalid-feedback"
                                            [control]="alertForm.get('lp')">
                        <app-form-error type="required">
                            Loss(%) is required
                        </app-form-error>
                        <app-form-error type="min">
                            Loss% can't be less than or equal to 0
                        </app-form-error>
                        <app-form-error type="max">
                            Loss% can't be more than 100
                        </app-form-error>
                        <app-form-error type="pattern">
                            Loss% data is invalid
                        </app-form-error>
                    </app-form-error-container>
                </mat-form-field>
            </div>
        </div>
        <div class="form-group">
            <mat-form-field class="example-full-width">
                <mat-label for="qty" class="text-dark">Order Quantity<span
                        class="required">*</span></mat-label>
                <input matInput type="text" formControlName="qt" id="qty"
                    placeholder="Enter order quantity"
                    [ngClass]="{ 'is-invalid': alertForm.get('qt').dirty && alertForm.get('qt').invalid }"/>
                <app-form-error-container class="invalid-feedback"
                                        [control]="alertForm.get('qt')">
                    <app-form-error type="required">
                        Quantity is required
                    </app-form-error>
                    <app-form-error type="min">
                        Quantity can't be less than or equal to 0
                    </app-form-error>
                    <app-form-error type="max">
                        Quantity can't be more than 10000000
                    </app-form-error>
                    <app-form-error type="pattern">
                        Quantity can be only numbers
                    </app-form-error>
                </app-form-error-container>
            </mat-form-field>
        </div>
        <!-- <div class="row" style="padding: 5px;">
            <div class="col-sm-6">
                    <mat-checkbox formControlName="ada" id="da">Allow duplicate alerts <i class="fa fa-info-circle info-icon cursor" aria-hidden="true"
                        matTooltip="If this is checked then duplicate orders are enabled for the stocks which are received in alerts from Chart-ink more than once."
                        matTooltipPosition="after"></i>
                    </mat-checkbox>
            </div>
            <div class="col-sm-6">
                <mat-checkbox formControlName="ads" id="ds"
                       [disabled]="!alertForm.get('ada').value ? '' : null">Allow duplicate stocks <i class="fa fa-info-circle info-icon cursor" aria-hidden="true"
                       matTooltip="Stocks traded will be picked up if the alerts give the same stocks again in list."
                       matTooltipPosition="after"></i>
                </mat-checkbox>
            </div>
        </div>  -->
    </form>
</div>
<div matDialogActions class="action-button-align">
    <button class="btn btn-light align-elements" (click)="close()">Cancel
    </button>
    <button class="btn btn-primary" cdkFocusInitial [disabled]="alertForm.invalid"
            (click)="SaveAlert()">
        Save
    </button>
</div>
